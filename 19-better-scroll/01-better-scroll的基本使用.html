<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="bscroll.js"></script>
    <style>
        .wrapper {
            background-color: greenyellow;
            height: 200px;
            overflow: hidden;
        }
    </style>
</head>
<body>
<div class="wrapper">
    <ul>
        <button onclick="alert('111')">按钮</button>
        <li>列表内容----------------------1</li>
        <li>列表内容----------------------2</li>
        <li>列表内容----------------------3</li>
        <li>列表内容----------------------4</li>
        <li>列表内容----------------------5</li>
        <li>列表内容----------------------6</li>
        <li>列表内容----------------------7</li>
        <li>列表内容----------------------8</li>
        <li>列表内容----------------------9</li>
        <li>列表内容----------------------10</li>
        <li>列表内容----------------------11</li>
        <li>列表内容----------------------12</li>
        <li>列表内容----------------------13</li>
        <li>列表内容----------------------14</li>
        <li>列表内容----------------------15</li>
        <li>列表内容----------------------16</li>
        <li>列表内容----------------------17</li>
        <li>列表内容----------------------18</li>
        <li>列表内容----------------------19</li>
        <li>列表内容----------------------20</li>
        <li>列表内容----------------------21</li>
        <li>列表内容----------------------22</li>
        <li>列表内容----------------------23</li>
        <li>列表内容----------------------24</li>
        <li>列表内容----------------------25</li>
        <li>列表内容----------------------26</li>
        <li>列表内容----------------------27</li>
        <li>列表内容----------------------28</li>
        <li>列表内容----------------------29</li>
        <li>列表内容----------------------30</li>
        <li>列表内容----------------------31</li>
        <li>列表内容----------------------32</li>
        <li>列表内容----------------------33</li>
        <li>列表内容----------------------34</li>
        <li>列表内容----------------------35</li>
        <li>列表内容----------------------36</li>
        <li>列表内容----------------------37</li>
        <li>列表内容----------------------38</li>
        <li>列表内容----------------------39</li>
        <li>列表内容----------------------40</li>
        <li>列表内容----------------------41</li>
        <li>列表内容----------------------42</li>
        <li>列表内容----------------------43</li>
        <li>列表内容----------------------44</li>
        <li>列表内容----------------------45</li>
        <li>列表内容----------------------46</li>
        <li>列表内容----------------------47</li>
        <li>列表内容----------------------48</li>
        <li>列表内容----------------------49</li>
        <li>列表内容----------------------50</li>
        <li>列表内容----------------------51</li>
        <li>列表内容----------------------52</li>
        <li>列表内容----------------------53</li>
        <li>列表内容----------------------54</li>
        <li>列表内容----------------------55</li>
        <li>列表内容----------------------56</li>
        <li>列表内容----------------------57</li>
        <li>列表内容----------------------58</li>
        <li>列表内容----------------------59</li>
        <li>列表内容----------------------60</li>
        <li>列表内容----------------------61</li>
        <li>列表内容----------------------62</li>
        <li>列表内容----------------------63</li>
        <li>列表内容----------------------64</li>
        <li>列表内容----------------------65</li>
        <li>列表内容----------------------66</li>
        <li>列表内容----------------------67</li>
        <li>列表内容----------------------68</li>
        <li>列表内容----------------------69</li>
        <li>列表内容----------------------70</li>
        <li>列表内容----------------------71</li>
        <li>列表内容----------------------72</li>
        <li>列表内容----------------------73</li>
        <li>列表内容----------------------74</li>
        <li>列表内容----------------------75</li>
        <li>列表内容----------------------76</li>
        <li>列表内容----------------------77</li>
        <li>列表内容----------------------78</li>
        <li>列表内容----------------------79</li>
        <li>列表内容----------------------80</li>
        <li>列表内容----------------------81</li>
        <li>列表内容----------------------82</li>
        <li>列表内容----------------------83</li>
        <li>列表内容----------------------84</li>
        <li>列表内容----------------------85</li>
        <li>列表内容----------------------86</li>
        <li>列表内容----------------------87</li>
        <li>列表内容----------------------88</li>
        <li>列表内容----------------------89</li>
        <li>列表内容----------------------90</li>
        <li>列表内容----------------------91</li>
        <li>列表内容----------------------92</li>
        <li>列表内容----------------------93</li>
        <li>列表内容----------------------94</li>
        <li>列表内容----------------------95</li>
        <li>列表内容----------------------96</li>
        <li>列表内容----------------------97</li>
        <li>列表内容----------------------98</li>
        <li>列表内容----------------------99</li>
        <li>列表内容----------------------100</li>
    </ul>
</div>

<script>
    /**
     *    1.使用better-scroll首先创建bScroll对象，第一个参数为包裹的要滚动的内容的父标签，该标签下
     * 只能有一个元素
     *    2.要想使用滚动功能,wrapper必须设置一个固定的高度,同时设置over-flow:hidden，隐藏原生的滚动条
     *    3.默认情况下bScroll无法实时监听滚动位置，需要设置一个可选属性，probeType:值
     *  主要有三种：1）0,1都是不监测实时的位置
     *            2）2: 在手指滚动的过程中侦测，手指离开后的惯性动作不侦测
     *            3）3：只要是滚动，都侦测
     *    4.如果在wrapper内滚动的元素中有button，则默认不会监听事件，需要手动开启：click:true(但是这个好像
     *    是会监听的)
     *    5.pullUpLoad 上拉加载功能,需要better-scroll对象监听pullingUp事件，bScroll.on('pullingUp',函数)
     * 但是该回调函数只会执行一次，必须在执行完后调用bScroll.finishPullUp(),则可继续加载
     */
    const bScroll = new BScroll(document.querySelector('.wrapper'), {
        probeType: 3,
        click:true,
        pullUpLoad:true
    })

    //监听滚动事件,参数position 为当前滚动的位置
    bScroll.on('scroll',(position)=>{
        //console.log(position);
    })

    //监听上拉加载事件，无参，执行完后需要调用.finishPullUp(),才会多次执行上拉加载
    bScroll.on('pullingUp',()=>{
        //1.发送网络请求
        console.log('上拉加载更多');

        //2.等数据请求完成，并将新的数据展示出来后，调用此方法
        setTimeout(()=>{
            bScroll.finishPullUp()
        },2000)
    })
</script>
</body>
</html>